<script>
  // Inisialisasi peta
  var map = L.map('map').setView([-2.5, 118], 5);

  // Basemap OSM
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // Load GeoJSON (relative path untuk GitHub Pages)
  fetch('./PPKT.geojson')
    .then(response => {
      if (!response.ok) {
        throw new Error("GeoJSON file not found");
      }
      return response.json();
    })
    .then(data => {
      console.log("GeoJSON loaded successfully");

      var geojsonLayer = L.geoJSON(data, {
        style: function () {
          return {
            color: "#e63946",
            weight: 2,
            fillOpacity: 0.5
          };
        },
        onEachFeature: function (feature, layer) {
          if (feature.properties) {
            let popupContent = "";
            for (let key in feature.properties) {
              popupContent += `<b>${key}</b>: ${feature.properties[key]}<br>`;
            }
            layer.bindPopup(popupContent);
          }
        }
      }).addTo(map);

      // Zoom ke layer
      map.fitBounds(geojsonLayer.getBounds());
    })
    .catch(error => {
      console.error(error);
      alert("GeoJSON gagal dimuat. Periksa nama file & folder.");
    });
</script>
